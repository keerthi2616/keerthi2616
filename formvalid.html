<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registration form</title>
    <style>
        .error {
            color: red;
            font-size: 14px;
            margin-left: 10px;
        }
        </style>
    <script>
        function validateForm(event) {
            event.preventDefault(); // Prevent form submission

            // Clear previous error messages
           let errorSpans = document.querySelectorAll('.error');
              errorSpans.forEach(span => span.innerText = '');
    
                let isValid = true;
                let fullname = document.forms["myForm"]["fname"].value.trim();
                let username = document.forms["myForm"]["username"].value.trim();
                let password = document.forms["myForm"]["password"].value;
                let confirmPassword = document.forms["myForm"]["confirmPassword"].value;
                let email = document.forms["myForm"]["email"].value.trim();
                let mobile = document.forms["myForm"]["mobile"].value.trim();
                let dob = document.forms["myForm"]["dob"].value;
                let gender = document.forms["myForm"]["gender"].value;
                let address = document.forms["myForm"]["address"].value.trim();
                let pincode = document.forms["myForm"]["pincode"].value.trim();

                //Name:mandatory
                if (fullname === "") {
                    document.getElementById("nameError").innerText = "Full Name is required";
                    isValid = false;
                }
                //Username:only characters
                let userRegex = /^[A-Za-z]+$/;
                if (!userRegex.test(username)) {
                    document.getElementById("usernameError").innerText = "Username must contain only alphabets";
                    isValid = false;
                }
                //Password: min 8 char, 1 upper, 1 lower, 1 digit, 1 special char
                let passRegex = /^(?=.[a-z])(?=.[A-Z])(?=.\d)(?=.[0-9])(?=.[@$!%?&])[A-Za-z\d@$!%*?&]{8,}$/;
                if (!passRegex.test(password)) {
                    document.getElementById("passwordError").innerText = "Password must be at least 8 characters and include uppercase, lowercase, digit, and special character";
                    isValid = false;
                }
                //confirm password
                if (password !== confirmPassword || confirmPassword === "") {
                    document.getElementById("confirmPasswordError").innerText = "Passwords do not match";
                    isValid = false;
                }
                //Email must contain @ and .
                let emailRegex = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,3}$/;
                if (!emailRegex.test(email)) {
                    document.getElementById("emailError").innerText = "Invalid email format";
                    isValid = false;
                }
                //Mobile: 10 digits
                let mobileRegex = /^[6-9][0-9]{9}$/;
                if (!mobileRegex.test(mobile)) {
                    document.getElementById("mobileError").innerText = "Mobile number must be 10 digits starting with 6-9";
                    isValid = false;
                }
                //DOB: not empty
                if (dob === "") {
                    document.getElementById("dobError").innerText = "Date of Birth is required";
                    isValid = false;
                }else{
                    let birthDate = new Date(dob);
                    let age = new Date().getFullYear() - birthDate.getFullYear();
                    if (age < 18) {
                        document.getElementById("dobError").innerText = "You must be at least 18 years old";
                        isValid = false;
                    }
                }
                    //gender: must select one
                    if(gender === ""){
                        document.getElementById("genderError").innerText = "Pleaseselect ypur gender";
                        isValid = false;
                }
                //Address: minimum 10 characters
                if (address.length < 10) {
                    document.getElementById("addressError").innerText = "Address must be at least 10 characters";
                    isValid = false;
                }
                //pincode: exactly 6 digits
                let pinRegex = /^[0-9]{6}$/;
                if (!pinRegex.test(pincode)) {
                    document.getElementById("pincodeError").innerText = "Pincode must be exactly 6 digits";
                    isValid = false;
                }
                if(isValid){
                    alert("Form submitted successfully!");
                }   
            } 

    </script>             
</head>
<body>
    <h2>Registration Form</h2>
  <form name="myForm" onsubmit="validateForm(event)">
    <label>Full Name: </label>
    <input type="text" name="fname">
    <span id="nameError" class="error"></span><br><br>

    <label>Username: </label>
    <input type="text" name="username">
    <span id="usernameError" class="error"></span><br><br>

    <label>Password: </label>
    <input type="password" name="password">
    <span id="passwordError" class="error"></span><br><br>

    <label>Confirm Password: </label>
    <input type="password" name="confirmPassword">
    <span id="confirmPasswordError" class="error"></span><br><br>

    <label>Email: </label>
    <input type="text" name="email">
    <span id="emailError" class="error"></span><br><br>

    <label>Mobile: </label>
    <input type="text" name="mobile">
    <span id="mobileError" class="error"></span><br><br>

    <label>Date of Birth: </label>
    <input type="date" name="dob">
    <span id="dobError" class="error"></span><br><br>

    <label>Gender: </label>
    <input type="radio" name="gender" value="Male"> Male
    <input type="radio" name="gender" value="Female"> Female
    <input type="radio" name="gender" value="Other"> Other
    <span id="genderError" class="error"></span><br><br>

    <label>Address: </label>
    <textarea name="address"></textarea>
    <span id="addressError" class="error"></span><br><br>

    <label>Pincode: </label>
    <input type="text" name="pincode">
    <span id="pincodeError" class="error"></span><br><br>

    <input type="submit" value="Register">
  </form>
</body>
</html>